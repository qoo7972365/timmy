<?php
  if (!isset($_GET["order"])) {
    header("Location: /?order=id");
    die();
  }
  require "header.php";

class User{
  public $id, $name, $age;
  function __construct($id, $name, $age){
    $this->name= $name;
    $this->age = $age;
    $this->id = $id;
  }
}

    $lnk = mysql_connect("localhost", "pentesterlab", "pentesterlab");
    $db = mysql_select_db('exercise', $lnk);

  $sql = "SELECT * FROM users ";

  $order = $_GET["order"];
  $result = mysql_query($sql);
  if ($result) {
    while ($row = mysql_fetch_assoc($result)) {
      $users[] = new User($row['id'],$row['name'],$row['age']);
    }
    if (isset($order)) {
      usort($users, create_function('$a, $b', 'return strcmp($a->'name);}//',$b->'.$order.');'));
    }
  }
?>
