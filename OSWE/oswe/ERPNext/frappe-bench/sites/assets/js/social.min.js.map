{"version":3,"file":"social.min.js","sources":["../../../apps/frappe/frappe/public/js/frappe/social/components/PostAction.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/PostAction.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/PostComment.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/PostComment.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/PostDropdownMenu.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/PostDropdownMenu.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/Post.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/Post.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/PostLoader.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/PostLoader.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/PostSidebar.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/PostSidebar.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/ActivitySidebar.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/ActivitySidebar.vue","../../../apps/frappe/frappe/public/js/frappe/social/pages/Wall.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/pages/Wall.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/ProfileSidebar.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/ProfileSidebar.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/ProfileBanner.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/ProfileBanner.vue","../../../apps/frappe/frappe/public/js/frappe/social/pages/Profile.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/pages/Profile.vue","../../../apps/frappe/frappe/public/js/frappe/social/pages/UserList.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/pages/UserList.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/ImageViewer.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/components/ImageViewer.vue","../../../apps/frappe/frappe/public/js/frappe/social/Home.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/social/Home.vue","../../../apps/frappe/frappe/public/js/frappe/social/social_home.js"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: [\n\t\t'liked_by',\n\t\t'comment_count',\n\t],\n\tcomputed: {\n\t\tlike_count() {\n\t\t\treturn this.split_string(this.liked_by).length;\n\t\t},\n\t\tpost_liked() {\n\t\t\treturn this.split_string(this.liked_by).includes(frappe.session.user);\n\t\t},\n\t\tliked_by_data() {\n\t\t\treturn JSON.stringify(this.split_string(this.liked_by));\n\t\t}\n\t},\n\tmethods: {\n\t\tsplit_string(str) {\n\t\t\treturn str && str !== '' ? str.split('\\n') : []\n\t\t}\n\t}\n}\n","<template>\n\t<div class=\"post-action-container\">\n\t\t<div class=\"like\" @click=\"$emit('toggle_like')\">\n\t\t\t<i class=\"octicon octicon-heart\" :class=\"{'liked': post_liked}\"></i>\n\t\t\t<span class=\"likes\" :data-liked-by=\"liked_by_data\">{{ like_count }}</span>\n\t\t</div>\n\t\t<div class=\"comment\" @click=\"$emit('toggle_comment')\">\n\t\t\t<i class=\"octicon octicon-comment\"></i>\n\t\t\t<span class=\"comment_count\">{{ comment_count }}</span>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: [\n\t\t'liked_by',\n\t\t'comment_count',\n\t],\n\tcomputed: {\n\t\tlike_count() {\n\t\t\treturn this.split_string(this.liked_by).length;\n\t\t},\n\t\tpost_liked() {\n\t\t\treturn this.split_string(this.liked_by).includes(frappe.session.user);\n\t\t},\n\t\tliked_by_data() {\n\t\t\treturn JSON.stringify(this.split_string(this.liked_by));\n\t\t}\n\t},\n\tmethods: {\n\t\tsplit_string(str) {\n\t\t\treturn str && str !== '' ? str.split('\\n') : []\n\t\t}\n\t}\n}\n</script>\n<style lang='less' scoped>\n.post-action-container {\n\tdisplay: flex;\n\tbackground-color: #F6F6F6;\n\tpadding: 10px;\n\t.comment, .like {\n\t\tpadding-right: 20px;\n\t\tcursor: pointer;\n\t\tcolor: #8d99a6;\n\t\tspan {\n\t\t\tpadding: 5px;\n\t\t}\n\t\t&:hover {\n\t\t\tcolor: darken(#8d99a6, 10%);\n\t\t}\n\t}\n\t.likes {\n\t\tcursor: pointer;\n\t}\n\t.liked {\n\t\tcolor: #fc4f51;\n\t\t&:hover {\n\t\t\tcolor: lighten(#fc4f51, 10%) !important;\n\t\t}\n\t}\n\t.pinned {\n\t\tcolor: black;\n\t}\n}\n</style>","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: ['comments'],\n\tmounted() {\n\t\tthis.make_comment_section();\n\t\tthis.make_mentions_clickable(this.$refs['comments']);\n\t},\n\tmethods: {\n\t\tget_avatar(user) {\n\t\t\treturn frappe.avatar(user)\n\t\t},\n\t\tget_time(timestamp) {\n\t\t\treturn comment_when(timestamp, true)\n\t\t},\n\t\tgo_to_profile_page(user) {\n\t\t\tfrappe.set_route('social', 'profile', user)\n\t\t},\n\t\tmake_comment_section() {\n\t\t\tthis.comment_section = frappe.ui.form.make_control({\n\t\t\t\tparent: this.$refs['comment-section'],\n\t\t\t\tonly_input: true,\n\t\t\t\trender_input: true,\n\t\t\t\tno_wrapper: true,\n\t\t\t\tmentions: this.get_names_for_mentions(),\n\t\t\t\tdf: {\n\t\t\t\t\tfieldtype: 'Comment',\n\t\t\t\t\tfieldname: 'comment'\n\t\t\t\t},\n\t\t\t\ton_submit: this.create_comment.bind(this)\n\t\t\t});\n\t\t},\n\t\tcreate_comment() {\n\t\t\tconst message = this.comment_section.get_value().replace('<div><br></div>', '');\n\t\t\tif (!strip_html(message)) return\n\t\t\tfrappe.utils.play_sound(\"click\");\n\t\t\tthis.$emit('create_comment', message);\n\t\t\tthis.comment_section.clear();\n\t\t},\n\t\tget_names_for_mentions() {\n\t\t\tvar valid_users = Object.keys(frappe.boot.user_info)\n\t\t\t\t.filter(user => ![\"Administrator\", \"Guest\"].includes(user));\n\t\t\tvalid_users = valid_users\n\t\t\t\t.filter(user => frappe.boot.user_info[user].allowed_in_mentions==1);\n\t\t\treturn valid_users.map(user => frappe.boot.user_info[user].name);\n\t\t},\n\t\tmake_mentions_clickable(parent_element) {\n\t\t\tArray.from(parent_element.getElementsByClassName('mention'))\n\t\t\t\t.forEach((mention) => {\n\t\t\t\t\tmention.classList.add('cursor-pointer');\n\t\t\t\t\tmention.addEventListener('click', () => {\n\t\t\t\t\t\tthis.go_to_profile_page(mention.dataset.value)\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t}\n\t}\n}\n","<template>\n\t<div>\n\t\t<div class=\"comment-box flex-column\">\n\t\t\t<div class=\"text-muted comment-label\">{{ __('Add a comment') }}</div>\n\t\t\t<div ref=\"comment-section\"></div>\n\t\t\t<div class=\"flex justify-between\">\n\t\t\t\t<div class=\"text-muted small\">\n\t\t\t\t\t{{ __(\"Ctrl+Enter to add comment\") }}\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"btn btn-primary btn-sm\"\n\t\t\t\t\t@click=\"create_comment\">\n\t\t\t\t\t{{ __('Comment') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ref=\"comments\" v-if=\"comments.length\" class=\"comment-list\">\n\t\t\t<div class=\"comment\" v-for=\"comment in comments\" :key=\"comment.name\">\n\t\t\t\t<span\n\t\t\t\t\tclass=\"cursor-pointer\"\n\t\t\t\t\t@click=\"go_to_profile_page(comment.owner)\"\n\t\t\t\t\tv-html=\"get_avatar(comment.owner)\">\n\t\t\t\t</span>\n\t\t\t\t<span class=\"content\" v-html=\"comment.content\"/>\n\t\t\t\t<span\n\t\t\t\t\tclass=\"text-muted\"\n\t\t\t\t\tv-html=\"get_time(comment.creation)\">\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: ['comments'],\n\tmounted() {\n\t\tthis.make_comment_section();\n\t\tthis.make_mentions_clickable(this.$refs['comments']);\n\t},\n\tmethods: {\n\t\tget_avatar(user) {\n\t\t\treturn frappe.avatar(user)\n\t\t},\n\t\tget_time(timestamp) {\n\t\t\treturn comment_when(timestamp, true)\n\t\t},\n\t\tgo_to_profile_page(user) {\n\t\t\tfrappe.set_route('social', 'profile', user)\n\t\t},\n\t\tmake_comment_section() {\n\t\t\tthis.comment_section = frappe.ui.form.make_control({\n\t\t\t\tparent: this.$refs['comment-section'],\n\t\t\t\tonly_input: true,\n\t\t\t\trender_input: true,\n\t\t\t\tno_wrapper: true,\n\t\t\t\tmentions: this.get_names_for_mentions(),\n\t\t\t\tdf: {\n\t\t\t\t\tfieldtype: 'Comment',\n\t\t\t\t\tfieldname: 'comment'\n\t\t\t\t},\n\t\t\t\ton_submit: this.create_comment.bind(this)\n\t\t\t});\n\t\t},\n\t\tcreate_comment() {\n\t\t\tconst message = this.comment_section.get_value().replace('<div><br></div>', '');\n\t\t\tif (!strip_html(message)) return\n\t\t\tfrappe.utils.play_sound(\"click\");\n\t\t\tthis.$emit('create_comment', message);\n\t\t\tthis.comment_section.clear();\n\t\t},\n\t\tget_names_for_mentions() {\n\t\t\tvar valid_users = Object.keys(frappe.boot.user_info)\n\t\t\t\t.filter(user => ![\"Administrator\", \"Guest\"].includes(user));\n\t\t\tvalid_users = valid_users\n\t\t\t\t.filter(user => frappe.boot.user_info[user].allowed_in_mentions==1);\n\t\t\treturn valid_users.map(user => frappe.boot.user_info[user].name);\n\t\t},\n\t\tmake_mentions_clickable(parent_element) {\n\t\t\tArray.from(parent_element.getElementsByClassName('mention'))\n\t\t\t\t.forEach((mention) => {\n\t\t\t\t\tmention.classList.add('cursor-pointer');\n\t\t\t\t\tmention.addEventListener('click', () => {\n\t\t\t\t\t\tthis.go_to_profile_page(mention.dataset.value)\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.comment-box {\n\t.comment-label {\n\t\tmargin-bottom: 5px;\n\t}\n\t::v-deep .ql-editor {\n\t\tbackground: white;\n\t\tborder-radius: 4px;\n\t\tmin-height: 60px !important;\n\t\tborder: 1px solid #d1d8dd;\n\t}\n\tbutton {\n\t\tpadding: 2px 5px;\n\t\tfont-size: 10px;\n\t\talign-self: flex-end;\n\t}\n}\n.comment-list {\n\tmargin-top: 10px;\n\t.comment {\n\t\t.comment-input-wrapper {\n\t\t\tmargin-top: -6px;\n\t\t\tfont-size: 11px;\n\t\t}\n\t\tdisplay: flex;\n\t\tpadding: 5px 0;\n\t\t.content {\n\t\t\talign-self: center;\n\t\t\tfont-size: 12px;\n\t\t\tflex: 1\n\t\t}\n\t}\n}\n</style>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: ['options'],\n}\n","<template>\n\t<div class=\"dropdown\">\n\t\t<span class=\"caret cursor-pointer dropdown-toggle\" data-toggle=\"dropdown\"></span>\n\t\t<ul class=\"dropdown-menu\">\n\t\t\t<li v-for=\"option in options\" :key=\"option.label\">\n\t\t\t\t<a @click=\"option.action\">{{option.label}}</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: ['options'],\n}\n</script>\n<style lang=\"less\" scoped>\n.dropdown-menu {\n\tmin-width: 100px;\n\tleft: auto;\n\tright: 0;\n\ta {\n\t\tpadding: 12px;\n\t\tfont-size: 10px;\n\t}\n}\n</style>\n\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport PostAction from './PostAction.vue';\nimport PostComment from './PostComment.vue';\nimport PostDropdownMenu from './PostDropdownMenu.vue';\n\nexport default {\n\tprops: ['post'],\n\tcomponents: {\n\t\tPostAction,\n\t\tPostComment,\n\t\tPostDropdownMenu\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser_avatar: frappe.avatar(this.post.owner, 'avatar-medium'),\n\t\t\tpost_time: comment_when(this.post.creation),\n\t\t\tuser_name: frappe.user_info(this.post.owner).fullname,\n\t\t\tcomment_count: 0,\n\t\t\tcomments: [],\n\t\t\tshow_comments: false,\n\t\t\tis_globally_pinnable: frappe.user_roles.includes('System Manager') && frappe.social.is_home_page(),\n\t\t\tis_pinnable: false,\n\t\t\tis_user_post_owner: this.post.owner === frappe.session.user\n\t\t}\n\t},\n\tcomputed: {\n\t\tcan_pin() {\n\t\t\treturn this.is_globally_pinnable || this.is_pinnable\n\t\t},\n\t\tis_pinned() {\n\t\t\treturn false && frappe.social.is_profile_page(this.post.owner)\n\t\t\t\t|| this.post.is_globally_pinned && frappe.social.is_home_page()\n\t\t},\n\t\toptions() {\n\t\t\tconst options = []\n\t\t\tif (this.can_pin) {\n\t\t\t\tif (this.is_pinned) {\n\t\t\t\t\toptions.push({\n\t\t\t\t\t\t'label': __('Unpin'),\n\t\t\t\t\t\t'action': this.toggle_pin\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\toptions.push({\n\t\t\t\t\t\t'label': __('Pin Globally'),\n\t\t\t\t\t\t'action': this.toggle_pin\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.is_user_post_owner) {\n\t\t\t\toptions.push({\n\t\t\t\t\t'label': __('Delete'),\n\t\t\t\t\t'action': this.delete_post\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t},\n\tcreated() {\n\t\tfrappe.db.get_list('Post Comment', {\n\t\t\tfields: ['name', 'content', 'owner', 'creation'],\n\t\t\torder_by: 'creation desc',\n\t\t\tfilters: {\n\t\t\t\tparent: this.post.name\n\t\t\t}\n\t\t}).then(comments => {\n\t\t\tthis.comments = comments;\n\t\t})\n\n\t\tif (!this.post.liked_by) {\n\t\t\tthis.$set(this.post, 'liked_by', '')\n\t\t}\n\n\t\tfrappe.realtime.on('new_post_comment' + this.post.name, (comment) => {\n\t\t\tthis.comments = [comment].concat(this.comments);\n\t\t})\n\t\tfrappe.realtime.on('update_liked_by' + this.post.name, this.update_liked_by)\n\n\t\tfrappe.realtime.on('delete_post' + this.post.name, () => {\n\t\t\tthis.$emit('delete-post')\n\t\t})\n\n\t\tthis.$root.$on('user_image_updated', () => {\n\t\t\tthis.user_avatar = frappe.avatar(this.post.owner, 'avatar-medium')\n\t\t})\n\n\t},\n\tmounted() {\n\t\tthis.$refs['content'].querySelectorAll('img').forEach((img) => {\n\t\t\timg.addEventListener('click', () => {\n\t\t\t\tthis.$root.$emit('show_preview', img.src);\n\t\t\t})\n\t\t});\n\n\t\tthis.$refs['content'].querySelectorAll('a').forEach(link_element => {\n\t\t\t// to open link in new tab\n\t\t\tlink_element.target = 'blank';\n\t\t\tthis.generate_preview(link_element);\n\t\t})\n\t},\n\tmethods: {\n\t\tgoto_profile(user) {\n\t\t\tfrappe.set_route('social', 'profile/' + user)\n\t\t},\n\t\ttoggle_comment() {\n\t\t\tthis.show_comments = !this.show_comments\n\t\t},\n\t\tupdate_liked_by(liked_by) {\n\t\t\tthis.post.liked_by = liked_by;\n\t\t},\n\t\ttoggle_like() {\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.toggle_like', {\n\t\t\t\tpost_name: this.post.name,\n\t\t\t})\n\t\t},\n\t\ttoggle_pin() {\n\t\t\tif (this.is_globally_pinnable) {\n\t\t\t\tfrappe.db.set_value('Post', this.post.name, 'is_globally_pinned', cint(!this.is_pinned))\n\t\t\t\t\t.then(res => this.post.is_globally_pinned = cint(res.message.is_globally_pinned))\n\t\t\t}\n\t\t\tif (this.is_pinnable) {\n\t\t\t\tfrappe.db.set_value('Post', this.post.name, 'is_pinned', cint(!this.is_pinned))\n\t\t\t\t\t.then(res => this.post.is_pinned = cint(res.message.is_pinned))\n\t\t\t}\n\t\t},\n\t\tcreate_comment(content) {\n\t\t\tconst comment = frappe.model.get_new_doc('Post Comment');\n\t\t\tcomment.content = content\n\t\t\tcomment.parent = this.post.name;\n\t\t\tfrappe.db.insert(comment);\n\t\t},\n\t\tdelete_post() {\n\t\t\tfrappe.confirm(__(\"Are you sure you want to delete this post?\"), () => {\n\t\t\t\tfrappe.dom.freeze();\n\t\t\t\tfrappe.xcall('frappe.social.doctype.post.post.delete_post', {\n\t\t\t\t\t'post_name': this.post.name\n\t\t\t\t}).then(frappe.dom.unfreeze)\n\t\t\t})\n\t\t},\n\t\tupdate_seen() {\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.set_seen', {\n\t\t\t\tpost_name: this.post.name\n\t\t\t}).then(() => this.post.seen = true)\n\t\t},\n\t\tgenerate_preview(link_element) {\n\t\t\t// TODO: move the code to separate component\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.get_link_info', {\n\t\t\t\t'url': link_element.href\n\t\t\t}).then(info => {\n\t\t\t\tconst title = frappe.ellipsis(info['og:title'] || info['title'], 60)\n\t\t\t\tconst description = frappe.ellipsis(info['og:description'] || info['description'], 280)\n\t\t\t\tconst image = info['og:image'];\n\t\t\t\tconst url = info['og:url'];\n\n\t\t\t\tif (title) {\n\t\t\t\t\tlink_element.insertAdjacentHTML('afterend', `\n\t\t\t\t\t\t<a href=\"${url}\" target=\"blank\" class=\"preview-card\" class=\"flex\">\n\t\t\t\t\t\t\t<img src=\"${image}\"/>\n\t\t\t\t\t\t\t<div class=\"flex-column\">\n\t\t\t\t\t\t\t\t<h5>${title}</h5>\n\t\t\t\t\t\t\t\t<p class=\"text-muted\">${description}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t` );\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(console.error)\n\t\t}\n\t}\n}\n","<template>\n\t<div class=\"post-card\">\n\t\t<div class=\"post-body\" :class=\"{'pinned ': is_pinned}\">\n\t\t\t<div class=\"pull-right flex\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"pin-option\"\n\t\t\t\t\tv-if=\"is_pinned\">\n\t\t\t\t\tGlobally Pinned\n\t\t\t\t</div>\n\t\t\t\t<post-dropdown-menu\n\t\t\t\t\tclass=\"post-dropdown-menu\"\n\t\t\t\t\tv-if=\"options.length\"\n\t\t\t\t\t:options=\"options\"\n\t\t\t\t/>\n\t\t\t\t<transition name=\"fade\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"indicator blue\"\n\t\t\t\t\t\tv-if=\"!this.post.seen\">\n\t\t\t\t\t</span>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t\t<div class=\"user-avatar\" v-html=\"user_avatar\" @click=\"goto_profile(post.owner)\"></div>\n\t\t\t<a class=\"user-name\" @click=\"goto_profile(post.owner)\">{{ user_name }}</a>\n\t\t\t<div class=\"text-muted\" v-html=\"post_time\"></div>\n\t\t\t<div ref=\"content\" class=\"content\" v-html=\"post.content\"></div>\n\t\t</div>\n\t\t<post-action\n\t\t\t:liked_by=\"post.liked_by\"\n\t\t\t:comment_count=\"comments.length\"\n\t\t\t@toggle_comment=\"toggle_comment\"\n\t\t\t@toggle_like=\"toggle_like\"\n\t\t/>\n\t\t<post-comment\n\t\t\tv-if=\"show_comments\"\n\t\t\tclass=\"post-comments\"\n\t\t\t:comments=\"comments\"\n\t\t\t@create_comment=\"create_comment\"\n\t\t/>\n\t</div>\n</template>\n<script>\nimport PostAction from './PostAction.vue';\nimport PostComment from './PostComment.vue';\nimport PostDropdownMenu from './PostDropdownMenu.vue';\n\nexport default {\n\tprops: ['post'],\n\tcomponents: {\n\t\tPostAction,\n\t\tPostComment,\n\t\tPostDropdownMenu\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser_avatar: frappe.avatar(this.post.owner, 'avatar-medium'),\n\t\t\tpost_time: comment_when(this.post.creation),\n\t\t\tuser_name: frappe.user_info(this.post.owner).fullname,\n\t\t\tcomment_count: 0,\n\t\t\tcomments: [],\n\t\t\tshow_comments: false,\n\t\t\tis_globally_pinnable: frappe.user_roles.includes('System Manager') && frappe.social.is_home_page(),\n\t\t\tis_pinnable: false,\n\t\t\tis_user_post_owner: this.post.owner === frappe.session.user\n\t\t}\n\t},\n\tcomputed: {\n\t\tcan_pin() {\n\t\t\treturn this.is_globally_pinnable || this.is_pinnable\n\t\t},\n\t\tis_pinned() {\n\t\t\treturn false && frappe.social.is_profile_page(this.post.owner)\n\t\t\t\t|| this.post.is_globally_pinned && frappe.social.is_home_page()\n\t\t},\n\t\toptions() {\n\t\t\tconst options = []\n\t\t\tif (this.can_pin) {\n\t\t\t\tif (this.is_pinned) {\n\t\t\t\t\toptions.push({\n\t\t\t\t\t\t'label': __('Unpin'),\n\t\t\t\t\t\t'action': this.toggle_pin\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\toptions.push({\n\t\t\t\t\t\t'label': __('Pin Globally'),\n\t\t\t\t\t\t'action': this.toggle_pin\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.is_user_post_owner) {\n\t\t\t\toptions.push({\n\t\t\t\t\t'label': __('Delete'),\n\t\t\t\t\t'action': this.delete_post\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t},\n\tcreated() {\n\t\tfrappe.db.get_list('Post Comment', {\n\t\t\tfields: ['name', 'content', 'owner', 'creation'],\n\t\t\torder_by: 'creation desc',\n\t\t\tfilters: {\n\t\t\t\tparent: this.post.name\n\t\t\t}\n\t\t}).then(comments => {\n\t\t\tthis.comments = comments;\n\t\t})\n\n\t\tif (!this.post.liked_by) {\n\t\t\tthis.$set(this.post, 'liked_by', '')\n\t\t}\n\n\t\tfrappe.realtime.on('new_post_comment' + this.post.name, (comment) => {\n\t\t\tthis.comments = [comment].concat(this.comments);\n\t\t})\n\t\tfrappe.realtime.on('update_liked_by' + this.post.name, this.update_liked_by)\n\n\t\tfrappe.realtime.on('delete_post' + this.post.name, () => {\n\t\t\tthis.$emit('delete-post')\n\t\t})\n\n\t\tthis.$root.$on('user_image_updated', () => {\n\t\t\tthis.user_avatar = frappe.avatar(this.post.owner, 'avatar-medium')\n\t\t})\n\n\t},\n\tmounted() {\n\t\tthis.$refs['content'].querySelectorAll('img').forEach((img) => {\n\t\t\timg.addEventListener('click', () => {\n\t\t\t\tthis.$root.$emit('show_preview', img.src);\n\t\t\t})\n\t\t});\n\n\t\tthis.$refs['content'].querySelectorAll('a').forEach(link_element => {\n\t\t\t// to open link in new tab\n\t\t\tlink_element.target = 'blank';\n\t\t\tthis.generate_preview(link_element);\n\t\t})\n\t},\n\tmethods: {\n\t\tgoto_profile(user) {\n\t\t\tfrappe.set_route('social', 'profile/' + user)\n\t\t},\n\t\ttoggle_comment() {\n\t\t\tthis.show_comments = !this.show_comments\n\t\t},\n\t\tupdate_liked_by(liked_by) {\n\t\t\tthis.post.liked_by = liked_by;\n\t\t},\n\t\ttoggle_like() {\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.toggle_like', {\n\t\t\t\tpost_name: this.post.name,\n\t\t\t})\n\t\t},\n\t\ttoggle_pin() {\n\t\t\tif (this.is_globally_pinnable) {\n\t\t\t\tfrappe.db.set_value('Post', this.post.name, 'is_globally_pinned', cint(!this.is_pinned))\n\t\t\t\t\t.then(res => this.post.is_globally_pinned = cint(res.message.is_globally_pinned))\n\t\t\t}\n\t\t\tif (this.is_pinnable) {\n\t\t\t\tfrappe.db.set_value('Post', this.post.name, 'is_pinned', cint(!this.is_pinned))\n\t\t\t\t\t.then(res => this.post.is_pinned = cint(res.message.is_pinned))\n\t\t\t}\n\t\t},\n\t\tcreate_comment(content) {\n\t\t\tconst comment = frappe.model.get_new_doc('Post Comment');\n\t\t\tcomment.content = content\n\t\t\tcomment.parent = this.post.name;\n\t\t\tfrappe.db.insert(comment);\n\t\t},\n\t\tdelete_post() {\n\t\t\tfrappe.confirm(__(\"Are you sure you want to delete this post?\"), () => {\n\t\t\t\tfrappe.dom.freeze();\n\t\t\t\tfrappe.xcall('frappe.social.doctype.post.post.delete_post', {\n\t\t\t\t\t'post_name': this.post.name\n\t\t\t\t}).then(frappe.dom.unfreeze)\n\t\t\t})\n\t\t},\n\t\tupdate_seen() {\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.set_seen', {\n\t\t\t\tpost_name: this.post.name\n\t\t\t}).then(() => this.post.seen = true)\n\t\t},\n\t\tgenerate_preview(link_element) {\n\t\t\t// TODO: move the code to separate component\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.get_link_info', {\n\t\t\t\t'url': link_element.href\n\t\t\t}).then(info => {\n\t\t\t\tconst title = frappe.ellipsis(info['og:title'] || info['title'], 60)\n\t\t\t\tconst description = frappe.ellipsis(info['og:description'] || info['description'], 280)\n\t\t\t\tconst image = info['og:image'];\n\t\t\t\tconst url = info['og:url'];\n\n\t\t\t\tif (title) {\n\t\t\t\t\tlink_element.insertAdjacentHTML('afterend', `\n\t\t\t\t\t\t<a href=\"${url}\" target=\"blank\" class=\"preview-card\" class=\"flex\">\n\t\t\t\t\t\t\t<img src=\"${image}\"/>\n\t\t\t\t\t\t\t<div class=\"flex-column\">\n\t\t\t\t\t\t\t\t<h5>${title}</h5>\n\t\t\t\t\t\t\t\t<p class=\"text-muted\">${description}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t` );\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(console.error)\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.post-comments {\n\tpadding: 15px 46px;\n\tpadding-top: 0px;\n\tbackground: #F6F6F6;\n}\n.indicator {\n\tmargin-left: 15px;\n}\n.fade-enter-active, .fade-leave-active {\n\ttransition: opacity .8s;\n}\n.fade-enter, .fade-leave-to {\n\topacity: 0;\n}\n</style>\n\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Post from './Post.vue';\nimport PostSkeleton from './PostSkeleton.vue';\n\nexport default {\n\tprops: ['post_list_filter'],\n\tcomponents: {\n\t\tPost,\n\t\tPostSkeleton\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tposts: [],\n\t\t\tmore_posts_available: true,\n\t\t\tloading_posts: false,\n\t\t\tload_new: false\n\t\t}\n\t},\n\tcreated() {\n\t\twindow.addEventListener('scroll', this.handle_scroll);\n\t\tthis.update_posts();\n\t\tthis.$parent.$on('load_new_posts', () => {\n\t\t\tthis.update_posts()\n\t\t})\n\t\tfrappe.realtime.on('global_pin', () => {\n\t\t\tthis.update_posts()\n\t\t})\n\t},\n\twatch: {\n\t\tpost_list_filter(old_val, new_val) {\n\t\t\tif (JSON.stringify(old_val) !== JSON.stringify(new_val)){\n\t\t\t\tthis.update_posts()\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tget_posts(filters, load_old) {\n\t\t\treturn frappe.xcall('frappe.social.doctype.post.post.get_posts', {\n\t\t\t\tfilters,\n\t\t\t\tlimit_start: load_old ? this.posts.length : 0\n\t\t\t})\n\t\t},\n\t\tupdate_posts(load_old = false) {\n\t\t\tif (!this.post_list_filter) return\n\t\t\tthis.loading_posts = true;\n\n\t\t\tconst filters = Object.assign({}, this.post_list_filter);\n\n\t\t\tthis.get_posts(filters, load_old).then((res) => {\n\t\t\t\tif (load_old) {\n\t\t\t\t\tif (!res.length) {\n\t\t\t\t\t\tthis.more_posts_available = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.posts = this.posts.concat(res);\n\t\t\t\t} else {\n\t\t\t\t\tthis.posts = res;\n\t\t\t\t}\n\t\t\t}).finally(() => {\n\t\t\t\tthis.loading_posts = false;\n\t\t\t\tthis.track_seen()\n\t\t\t});\n\t\t},\n\t\thandle_scroll: frappe.utils.debounce(function() {\n\t\t\tthis.track_seen()\n\t\t\tconst screen_bottom = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\n\t\t\tif (screen_bottom && this.more_posts_available) {\n\t\t\t\tif (!this.loading_posts) {\n\t\t\t\t\tthis.update_posts(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 500),\n\t\ttrack_seen() {\n\t\t\tconst posts = this.$refs.posts || []\n\t\t\tposts.forEach((post_component) => {\n\t\t\t\tif(!post_component.post.seen\n\t\t\t\t && frappe.dom.is_element_in_viewport(post_component.$el, 50)) {\n\t\t\t\t\tpost_component.update_seen()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdelete_post(index) {\n\t\t\tthis.posts.splice(index, 1);\n\t\t},\n\t},\n\tdestroyed() {\n\t\twindow.removeEventListener('scroll', this.handle_scroll);\n\t}\n}\n","<template>\n\t<div>\n\t\t<div v-if=\"loading_posts && !posts.length\">\n\t\t\t<post-skeleton v-for=\"index in 5\" :key=\"index\"/>\n\t\t</div>\n\t\t<transition-group name=\"flip-list\">\n\t\t\t<post ref=\"posts\"\n\t\t\t\t:post=\"post\"\n\t\t\t\tv-for=\"(post, index) in posts\"\n\t\t\t\t:key=\"post.name\"\n\t\t\t\t@delete-post=\"delete_post(index)\"\n\t\t\t/>\n\t\t</transition-group>\n\t\t<div v-if=\"!loading_posts && !posts.length\" class=\"no-post-message text-muted\">\n\t\t\t{{ __('No posts yet') }}\n\t\t</div>\n\t\t<div\n\t\t\tv-show=\"loading_posts && posts.length\"\n\t\t\tclass=\"text-center padding\">\n\t\t\t{{ __('Fetching posts...') }}\n\t\t</div>\n\t\t<div\n\t\t\tv-show=\"posts.length && !loading_posts && !more_posts_available\"\n\t\t\tclass=\"text-center padding\">\n\t\t\t{{ __(\"That's all folks\") }}\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport Post from './Post.vue';\nimport PostSkeleton from './PostSkeleton.vue';\n\nexport default {\n\tprops: ['post_list_filter'],\n\tcomponents: {\n\t\tPost,\n\t\tPostSkeleton\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tposts: [],\n\t\t\tmore_posts_available: true,\n\t\t\tloading_posts: false,\n\t\t\tload_new: false\n\t\t}\n\t},\n\tcreated() {\n\t\twindow.addEventListener('scroll', this.handle_scroll);\n\t\tthis.update_posts();\n\t\tthis.$parent.$on('load_new_posts', () => {\n\t\t\tthis.update_posts()\n\t\t})\n\t\tfrappe.realtime.on('global_pin', () => {\n\t\t\tthis.update_posts()\n\t\t})\n\t},\n\twatch: {\n\t\tpost_list_filter(old_val, new_val) {\n\t\t\tif (JSON.stringify(old_val) !== JSON.stringify(new_val)){\n\t\t\t\tthis.update_posts()\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tget_posts(filters, load_old) {\n\t\t\treturn frappe.xcall('frappe.social.doctype.post.post.get_posts', {\n\t\t\t\tfilters,\n\t\t\t\tlimit_start: load_old ? this.posts.length : 0\n\t\t\t})\n\t\t},\n\t\tupdate_posts(load_old = false) {\n\t\t\tif (!this.post_list_filter) return\n\t\t\tthis.loading_posts = true;\n\n\t\t\tconst filters = Object.assign({}, this.post_list_filter);\n\n\t\t\tthis.get_posts(filters, load_old).then((res) => {\n\t\t\t\tif (load_old) {\n\t\t\t\t\tif (!res.length) {\n\t\t\t\t\t\tthis.more_posts_available = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.posts = this.posts.concat(res);\n\t\t\t\t} else {\n\t\t\t\t\tthis.posts = res;\n\t\t\t\t}\n\t\t\t}).finally(() => {\n\t\t\t\tthis.loading_posts = false;\n\t\t\t\tthis.track_seen()\n\t\t\t});\n\t\t},\n\t\thandle_scroll: frappe.utils.debounce(function() {\n\t\t\tthis.track_seen()\n\t\t\tconst screen_bottom = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\n\t\t\tif (screen_bottom && this.more_posts_available) {\n\t\t\t\tif (!this.loading_posts) {\n\t\t\t\t\tthis.update_posts(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 500),\n\t\ttrack_seen() {\n\t\t\tconst posts = this.$refs.posts || []\n\t\t\tposts.forEach((post_component) => {\n\t\t\t\tif(!post_component.post.seen\n\t\t\t\t && frappe.dom.is_element_in_viewport(post_component.$el, 50)) {\n\t\t\t\t\tpost_component.update_seen()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdelete_post(index) {\n\t\t\tthis.posts.splice(index, 1);\n\t\t},\n\t},\n\tdestroyed() {\n\t\twindow.removeEventListener('scroll', this.handle_scroll);\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.no-post-message {\n\theight: 200px;\n\ttext-align: center;\n\tvertical-align: middle;\n\tline-height: 200px;\n}\n.flip-list-move, .flip-list-to {\n\ttransition: transform 0.3s;\n}\n</style>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tfrequently_visited_list: [],\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.set_frequently_visited_list()\n\t},\n\tmethods: {\n\t\tgoto_list(route) {\n\t\t\tfrappe.set_route(route);\n\t\t},\n\t\tset_frequently_visited_list() {\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.frequently_visited_links')\n\t\t\t\t.then(data => {\n\t\t\t\t\tthis.frequently_visited_list = data;\n\t\t\t\t})\n\t\t},\n\t\tget_label(route) {\n\t\t\treturn frappe.utils.get_route_label(route);\n\t\t},\n\t\tgo_to_profile_page() {\n\t\t\tfrappe.set_route('social', 'profile', frappe.session.user)\n\t\t},\n\t\tgo_to_user_list() {\n\t\t\tfrappe.set_route('social', 'users')\n\t\t}\n\t}\n}\n","<template>\n\t<div class=\"flex flex-column\">\n\t\t<a class=\"leaderboard-link\"\n\t\t\t@click.prevent=\"go_to_user_list()\">\n\t\t\t{{ __('Leaderboard') }}\n\t\t</a>\n\t\t<div class=\"links\" v-if=\"frequently_visited_list.length\">\n\t\t\t<div class=\"muted-title\">\n\t\t\t\t{{ __('Frequently Visited Links') }}\n\t\t\t</div>\n\t\t\t<div class=\"flex flex-column\">\n\t\t\t\t<a class=\"route-link\"\n\t\t\t\t\t@click.prevent=\"goto_list(route_obj.route)\"\n\t\t\t\t\tv-for=\"route_obj in frequently_visited_list\"\n\t\t\t\t\t:key=\"route_obj.route\">\n\t\t\t\t\t{{ get_label(route_obj.route) }}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tfrequently_visited_list: [],\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.set_frequently_visited_list()\n\t},\n\tmethods: {\n\t\tgoto_list(route) {\n\t\t\tfrappe.set_route(route);\n\t\t},\n\t\tset_frequently_visited_list() {\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.frequently_visited_links')\n\t\t\t\t.then(data => {\n\t\t\t\t\tthis.frequently_visited_list = data;\n\t\t\t\t})\n\t\t},\n\t\tget_label(route) {\n\t\t\treturn frappe.utils.get_route_label(route);\n\t\t},\n\t\tgo_to_profile_page() {\n\t\t\tfrappe.set_route('social', 'profile', frappe.session.user)\n\t\t},\n\t\tgo_to_user_list() {\n\t\t\tfrappe.set_route('social', 'users')\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.route-link {\n\tmargin: 0px 10px 10px 0;\n\ttext-transform: capitalize;\n}\n.leaderboard-link {\n\t.route-link;\n\tmargin-bottom: 15px;\n}\n.stats {\n\tmin-height: 150px\n}\n.user-details {\n\t.user-avatar {\n\t\t/deep/.avatar-xl {\n\t\t\theight: 150px;\n\t\t\twidth: 150px;\n\t\t}\n\t}\n\t.user_name {\n\t\tdisplay: block;\n\t\tmargin-top: 10px;\n\t\tfont-size: 2rem;\n\t\tfont-weight: 600\n\t}\n}\n</style>\n\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t'events': []\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.get_events().then((events) => {\n\t\t\tthis.events = events\n\t\t})\n\t},\n\tmethods: {\n\t\tget_events() {\n\t\t\tconst today = frappe.datetime.now_date();\n\t\t\treturn frappe.xcall('frappe.desk.doctype.event.event.get_events', {\n\t\t\t\tstart: today,\n\t\t\t\tend: today\n\t\t\t})\n\t\t},\n\t\topen_chat() {\n\t\t\tsetTimeout(frappe.chat.widget.toggle);\n\t\t},\n\t\tget_time(timestamp) {\n\t\t\treturn frappe.datetime.get_time(timestamp)\n\t\t},\n\t\topen_event(event) {\n\t\t\tfrappe.set_route('Form', 'Event', event.name);\n\t\t}\n\t}\n}\n","<template>\n\t<div>\n\t\t<div class=\"muted-title\">{{ __('Upcoming Events') }}</div>\n\t\t<div class=\"event\" v-for=\"event in events\" :key=\"event.name\">\n\t\t\t<span class=\"bold\">{{ get_time(event.starts_on) }}</span>\n\t\t\t<a @click=\"open_event(event)\"> {{ event.subject }}</a>\n\t\t</div>\n\t\t<div class=\"event\" v-if=\"!events.length\">\n\t\t\t{{ __('No Upcoming Events') }}\n\t\t</div>\n\t\t<div class=\"muted-title\">{{ __('Chat') }}</div>\n\t\t<a @click=\"open_chat\">\n\t\t\t{{ __('Open Chat') }}\n\t\t</a>\n\t</div>\n</template>\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t'events': []\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.get_events().then((events) => {\n\t\t\tthis.events = events\n\t\t})\n\t},\n\tmethods: {\n\t\tget_events() {\n\t\t\tconst today = frappe.datetime.now_date();\n\t\t\treturn frappe.xcall('frappe.desk.doctype.event.event.get_events', {\n\t\t\t\tstart: today,\n\t\t\t\tend: today\n\t\t\t})\n\t\t},\n\t\topen_chat() {\n\t\t\tsetTimeout(frappe.chat.widget.toggle);\n\t\t},\n\t\tget_time(timestamp) {\n\t\t\treturn frappe.datetime.get_time(timestamp)\n\t\t},\n\t\topen_event(event) {\n\t\t\tfrappe.set_route('Form', 'Event', event.name);\n\t\t}\n\t}\n}\n</script>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport PostLoader from '../components/PostLoader.vue';\nimport PostSidebar from '../components/PostSidebar.vue';\nimport ActivitySidebar from '../components/ActivitySidebar.vue';\n\nexport default {\n\tcomponents: {\n\t\tPostLoader,\n\t\tPostSidebar,\n\t\tActivitySidebar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t'posts': [],\n\t\t\t'events': [],\n\t\t\t'new_posts_count': 0,\n\t\t}\n\t},\n\tcreated() {\n\t\tfrappe.realtime.on('new_post', (post_owner) => {\n\t\t\tif (post_owner === frappe.session.user) {\n\t\t\t\tthis.load_new_posts()\n\t\t\t} else {\n\t\t\t\tthis.new_posts_count += 1;\n\t\t\t}\n\t\t})\n\t},\n\tmethods: {\n\t\tload_new_posts() {\n\t\t\tthis.$emit('load_new_posts');\n\t\t\tthis.new_posts_count = 0;\n\t\t}\n\t}\n};\n","<template>\n\t<div class=\"wall-container\">\n\t\t<post-sidebar class=\"post-sidebar hidden-xs\"></post-sidebar>\n\t\t<div class=\"post-container\">\n\t\t\t<div\n\t\t\t\tclass=\"new_posts_count\"\n\t\t\t\t@click=\"load_new_posts\"\n\t\t\t\tv-show='new_posts_count'>\n\t\t\t\t{{ new_posts_count + ' new post'}}\n\t\t\t</div>\n\t\t\t<post-loader :post_list_filter=\"{}\"></post-loader>\n\t\t</div>\n\t\t<activity-sidebar class=\"activity-sidebar hidden-xs\"/>\n\t</div>\n</template>\n<script>\nimport PostLoader from '../components/PostLoader.vue';\nimport PostSidebar from '../components/PostSidebar.vue';\nimport ActivitySidebar from '../components/ActivitySidebar.vue';\n\nexport default {\n\tcomponents: {\n\t\tPostLoader,\n\t\tPostSidebar,\n\t\tActivitySidebar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t'posts': [],\n\t\t\t'events': [],\n\t\t\t'new_posts_count': 0,\n\t\t}\n\t},\n\tcreated() {\n\t\tfrappe.realtime.on('new_post', (post_owner) => {\n\t\t\tif (post_owner === frappe.session.user) {\n\t\t\t\tthis.load_new_posts()\n\t\t\t} else {\n\t\t\t\tthis.new_posts_count += 1;\n\t\t\t}\n\t\t})\n\t},\n\tmethods: {\n\t\tload_new_posts() {\n\t\t\tthis.$emit('load_new_posts');\n\t\t\tthis.new_posts_count = 0;\n\t\t}\n\t}\n};\n</script>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: {\n\t\tuser_id: String\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser: frappe.user_info(this.user_id),\n\t\t\tcan_edit_profile: frappe.social.is_session_user_page(),\n\t\t\tenergy_points: 0\n\t\t};\n\t},\n\tmounted() {\n\t\tfrappe.xcall('frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points', {user: this.user_id}).then(r => {\n\t\t\tthis.energy_points = r[this.user_id].energy_points;\n\t\t});\n\t},\n\tmethods: {\n\t\tedit_profile() {\n\t\t\tconst edit_profile_dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Edit Profile'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Attach Image',\n\t\t\t\t\t\tfieldname: 'user_image',\n\t\t\t\t\t\tlabel: 'Profile Image',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\t\tfieldname: 'interest',\n\t\t\t\t\t\tlabel: 'Interests',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Attach Image',\n\t\t\t\t\t\tfieldname: 'banner_image',\n\t\t\t\t\t\tlabel: 'Banner Image',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\t\tfieldname: 'location',\n\t\t\t\t\t\tlabel: 'Location',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\t\tfieldname: 'Interest'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Small Text',\n\t\t\t\t\t\tfieldname: 'bio',\n\t\t\t\t\t\tlabel: 'Bio',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: values => {\n\t\t\t\t\tedit_profile_dialog.disable_primary_action();\n\t\t\t\t\tfrappe\n\t\t\t\t\t\t.xcall('frappe.core.doctype.user.user.update_profile_info', {\n\t\t\t\t\t\t\tprofile_info: values\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(user => {\n\t\t\t\t\t\t\tuser.image = user.user_image;\n\t\t\t\t\t\t\tlet user_info = frappe.user_info(this.user_id);\n\t\t\t\t\t\t\tthis.user = Object.assign(user_info, user);\n\t\t\t\t\t\t\tthis.$root.$emit('user_image_updated');\n\t\t\t\t\t\t\tedit_profile_dialog.hide();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tedit_profile_dialog.enable_primary_action();\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __('Save')\n\t\t\t});\n\t\t\tedit_profile_dialog.set_values({\n\t\t\t\tuser_image: this.user.image,\n\t\t\t\tbanner_image: this.user.banner_image,\n\t\t\t\tlocation: this.user.location,\n\t\t\t\tinterest: this.user.interest,\n\t\t\t\tbio: this.user.bio\n\t\t\t});\n\t\t\tedit_profile_dialog.show();\n\t\t},\n\t\tview_energy_point_list(user) {\n\t\t\tfrappe.set_route('List', 'Energy Point Log', {user:user.name});\n\t\t}\n\t}\n};\n","<template>\n\t<div class=\"profile-sidebar flex flex-column\">\n\t\t<div class=\"user-details\">\n\t\t\t<h3>{{ user.fullname }}</h3>\n\t\t\t<p><a @click=\"view_energy_point_list(user)\" class=\"text-muted\">\n\t\t\t\t{{ __(\"Energy Points\") }}: {{ energy_points }}</a></p>\n\t\t\t<p>{{ user.bio }}</p>\n\t\t\t<div class=\"location\" v-if=\"user.location\">\n\t\t\t\t<span class=\"text-muted\">\n\t\t\t\t\t<i class=\"fa fa-map-marker\">&nbsp;</i>\n\t\t\t\t\t{{ user.location }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"interest\" v-if=\"user.interest\">\n\t\t\t\t<span class=\"text-muted\">\n\t\t\t\t\t<i class=\"fa fa-puzzle-piece\">&nbsp;</i>\n\t\t\t\t\t{{ user.interest }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<a\n\t\t\tclass=\"edit-profile-link\"\n\t\t\tv-if=\"can_edit_profile\"\n\t\t\t@click=\"edit_profile()\"\n\t\t>{{ __('Edit Profile') }}</a>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: {\n\t\tuser_id: String\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser: frappe.user_info(this.user_id),\n\t\t\tcan_edit_profile: frappe.social.is_session_user_page(),\n\t\t\tenergy_points: 0\n\t\t};\n\t},\n\tmounted() {\n\t\tfrappe.xcall('frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points', {user: this.user_id}).then(r => {\n\t\t\tthis.energy_points = r[this.user_id].energy_points;\n\t\t});\n\t},\n\tmethods: {\n\t\tedit_profile() {\n\t\t\tconst edit_profile_dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Edit Profile'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Attach Image',\n\t\t\t\t\t\tfieldname: 'user_image',\n\t\t\t\t\t\tlabel: 'Profile Image',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\t\tfieldname: 'interest',\n\t\t\t\t\t\tlabel: 'Interests',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Attach Image',\n\t\t\t\t\t\tfieldname: 'banner_image',\n\t\t\t\t\t\tlabel: 'Banner Image',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\t\tfieldname: 'location',\n\t\t\t\t\t\tlabel: 'Location',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\t\tfieldname: 'Interest'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldtype: 'Small Text',\n\t\t\t\t\t\tfieldname: 'bio',\n\t\t\t\t\t\tlabel: 'Bio',\n\t\t\t\t\t\treqd: 1\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: values => {\n\t\t\t\t\tedit_profile_dialog.disable_primary_action();\n\t\t\t\t\tfrappe\n\t\t\t\t\t\t.xcall('frappe.core.doctype.user.user.update_profile_info', {\n\t\t\t\t\t\t\tprofile_info: values\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(user => {\n\t\t\t\t\t\t\tuser.image = user.user_image;\n\t\t\t\t\t\t\tlet user_info = frappe.user_info(this.user_id);\n\t\t\t\t\t\t\tthis.user = Object.assign(user_info, user);\n\t\t\t\t\t\t\tthis.$root.$emit('user_image_updated');\n\t\t\t\t\t\t\tedit_profile_dialog.hide();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tedit_profile_dialog.enable_primary_action();\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __('Save')\n\t\t\t});\n\t\t\tedit_profile_dialog.set_values({\n\t\t\t\tuser_image: this.user.image,\n\t\t\t\tbanner_image: this.user.banner_image,\n\t\t\t\tlocation: this.user.location,\n\t\t\t\tinterest: this.user.interest,\n\t\t\t\tbio: this.user.bio\n\t\t\t});\n\t\t\tedit_profile_dialog.show();\n\t\t},\n\t\tview_energy_point_list(user) {\n\t\t\tfrappe.set_route('List', 'Energy Point Log', {user:user.name});\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"less\" scoped>\n.profile-sidebar {\n\tpadding: 10px 10px 0 0;\n}\n.user-details {\n\tmin-height: 150px;\n\t.location,\n\t.interest {\n\t\tmargin-bottom: 10px;\n\t\ti {\n\t\t\twidth: 15px;\n\t\t}\n\t}\n}\n.edit-profile-link {\n\tmargin-top: 15px;\n}\n</style>\n","//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: ['user_id'],\n\tdata() {\n\t\treturn {\n\t\t\tuser_avatar: frappe.avatar(this.user_id, 'avatar-xl'),\n\t\t\tuser_banner: frappe.user_info(this.user_id).banner_image\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$root.$on('user_image_updated', () => {\n\t\t\tthis.user_avatar = frappe.avatar(this.user_id, 'avatar-xl')\n\t\t\tthis.user_banner = frappe.user_info(this.user_id).banner_image\n\t\t})\n\t},\n\tcomputed: {\n\t\tbackground_style() {\n\t\t\tconst style = {}\n\t\t\tif (this.user_banner) {\n\t\t\t\tstyle['background-image'] = `url('${this.user_banner}')`\n\t\t\t}\n\t\t\treturn style;\n\t\t}\n\t},\n}\n","<template>\n\t<div ref=\"banner\" class=\"banner\" :style=\"background_style\">\n\t\t<div\n\t\t\tclass=\"user-avatar container\"\n\t\t\tv-html=\"user_avatar\">\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: ['user_id'],\n\tdata() {\n\t\treturn {\n\t\t\tuser_avatar: frappe.avatar(this.user_id, 'avatar-xl'),\n\t\t\tuser_banner: frappe.user_info(this.user_id).banner_image\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$root.$on('user_image_updated', () => {\n\t\t\tthis.user_avatar = frappe.avatar(this.user_id, 'avatar-xl')\n\t\t\tthis.user_banner = frappe.user_info(this.user_id).banner_image\n\t\t})\n\t},\n\tcomputed: {\n\t\tbackground_style() {\n\t\t\tconst style = {}\n\t\t\tif (this.user_banner) {\n\t\t\t\tstyle['background-image'] = `url('${this.user_banner}')`\n\t\t\t}\n\t\t\treturn style;\n\t\t}\n\t},\n}\n</script>\n<style lang=\"less\" scoped>\n.banner {\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 300px;\n\tz-index: 101;\n\tposition: absolute;\n\tbackground-size: cover;\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\tbackground-color: #262626;\n\t.user-avatar {\n\t\tposition: relative;\n\t\t/deep/ .avatar {\n\t\t\ttop: 220px;\n\t\t\tleft: 10px;\n\t\t\twidth: 150px;\n\t\t\theight: 150px;\n\t\t\tborder-radius: 4px;\n\t\t\tbackground: white;\n\t\t\tposition: absolute !important;\n\t\t}\n\t}\n\t.editable-image {\n\t\t/deep/ .avatar {\n\t\t\tcursor: pointer;\n\t\t\t:hover {\n\t\t\t\topacity: 0.9;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport PostLoader from '../components/PostLoader.vue';\nimport ProfileSidebar from '../components/ProfileSidebar.vue';\nimport ActivitySidebar from\t'../components/ActivitySidebar.vue';\nimport ProfileBanner from '../components/ProfileBanner.vue';\nexport default {\n\tprops: ['user_id'],\n\tcomponents: {\n\t\tPostLoader,\n\t\tProfileSidebar,\n\t\tProfileBanner,\n\t\tActivitySidebar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshow_list: 'user_posts',\n\t\t\tpost_list_filter : null,\n\t\t\tuser_posts_count: 0,\n\t\t\tliked_posts_count: 0,\n\t\t}\n\t},\n\twatch: {\n\t\tshow_list() {\n\t\t\tif (this.show_list == 'user_posts') {\n\t\t\t\tthis.post_list_filter = this.get_user_posts_filter();\n\t\t\t} else if (this.show_list == 'liked_posts') {\n\t\t\t\tthis.post_list_filter = this.get_liked_posts_filter();\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.post_list_filter = this.get_user_posts_filter();\n\t\tthis.set_post_count()\n\t},\n\tmethods: {\n\t\tget_user_posts_filter() {\n\t\t\treturn {\n\t\t\t\t'owner': this.user_id\n\t\t\t}\n\t\t},\n\t\tget_liked_posts_filter() {\n\t\t\treturn {\n\t\t\t\t'liked_by': ['like', '%' + this.user_id + '%']\n\t\t\t}\n\t\t},\n\t\tset_post_count() {\n\t\t\tfrappe.db.count('Post', { filters: this.get_user_posts_filter() })\n\t\t\t\t.then(count => this.user_posts_count = count)\n\n\t\t\tfrappe.db.count('Post', { filters: this.get_liked_posts_filter() })\n\t\t\t\t.then(count => this.liked_posts_count = count)\n\t\t}\n\t}\n}\n","<template>\n\t<div>\n\t\t<div class=\"profile-head\">\n\t\t\t<profile-banner :user_id=\"user_id\"></profile-banner>\n\t\t</div>\n\t\t<div class=\"profile-container\">\n\t\t\t<profile-sidebar\n\t\t\t\t:user_id=\"user_id\"\n\t\t\t\tclass=\"profile-sidebar\"\n\t\t\t/>\n\t\t\t<div class=\"post-container\">\n\t\t\t\t<div class=\"list-options\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"option\"\n\t\t\t\t\t\t:class=\"{'bold': show_list === 'user_posts'}\"\n\t\t\t\t\t\t@click=\"show_list = 'user_posts'\">\n\t\t\t\t\t\t<span>{{__('Posts')}}</span>\n\t\t\t\t\t\t<span>({{ user_posts_count }})</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"option\"\n\t\t\t\t\t\t:class=\"{'bold': show_list === 'liked_posts'}\"\n\t\t\t\t\t\t@click=\"show_list = 'liked_posts'\">\n\t\t\t\t\t\t<span>{{__('Likes')}}</span>\n\t\t\t\t\t\t<span>({{ liked_posts_count }})</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<post-loader :post_list_filter=\"post_list_filter\"></post-loader>\n\t\t\t</div>\n\t\t\t<activity-sidebar class=\"activity-sidebar hidden-xs\"/>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport PostLoader from '../components/PostLoader.vue';\nimport ProfileSidebar from '../components/ProfileSidebar.vue';\nimport ActivitySidebar from\t'../components/ActivitySidebar.vue';\nimport ProfileBanner from '../components/ProfileBanner.vue';\nexport default {\n\tprops: ['user_id'],\n\tcomponents: {\n\t\tPostLoader,\n\t\tProfileSidebar,\n\t\tProfileBanner,\n\t\tActivitySidebar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshow_list: 'user_posts',\n\t\t\tpost_list_filter : null,\n\t\t\tuser_posts_count: 0,\n\t\t\tliked_posts_count: 0,\n\t\t}\n\t},\n\twatch: {\n\t\tshow_list() {\n\t\t\tif (this.show_list == 'user_posts') {\n\t\t\t\tthis.post_list_filter = this.get_user_posts_filter();\n\t\t\t} else if (this.show_list == 'liked_posts') {\n\t\t\t\tthis.post_list_filter = this.get_liked_posts_filter();\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.post_list_filter = this.get_user_posts_filter();\n\t\tthis.set_post_count()\n\t},\n\tmethods: {\n\t\tget_user_posts_filter() {\n\t\t\treturn {\n\t\t\t\t'owner': this.user_id\n\t\t\t}\n\t\t},\n\t\tget_liked_posts_filter() {\n\t\t\treturn {\n\t\t\t\t'liked_by': ['like', '%' + this.user_id + '%']\n\t\t\t}\n\t\t},\n\t\tset_post_count() {\n\t\t\tfrappe.db.count('Post', { filters: this.get_user_posts_filter() })\n\t\t\t\t.then(count => this.user_posts_count = count)\n\n\t\t\tfrappe.db.count('Post', { filters: this.get_liked_posts_filter() })\n\t\t\t\t.then(count => this.liked_posts_count = count)\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.profile-head {\n\theight: 190px;\n}\n.profile-sidebar {\n\tmargin-top: 60px;\n\tflex: 20%;\n}\n.right-sidebar {\n\tmargin-top: 5px;\n}\n.list-options {\n\tdisplay: flex;\n\t.option {\n\t\tcursor: pointer;\n\t\tpadding: 0px 10px 10px 0;\n\t}\n}\n</style>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tusers: [],\n\t\t\tfilter_users_by: null,\n\t\t\tsort_users_by: 'energy_points',\n\t\t\tsort_order: 'desc',\n\t\t\tshow_log_for: null,\n\t\t\tperiod_options: ['Lifetime', 'This Month', 'This Week', 'Today'],\n\t\t\tperiod: 'This Month'\n\t\t};\n\t},\n\tcomputed: {\n\t\tfrom_date() {\n\t\t\tif (this.period === 'This Month') {\n\t\t\t\treturn frappe.datetime.month_start();\n\t\t\t}\n\t\t\tif (this.period === 'This Week') {\n\t\t\t\treturn frappe.datetime.week_start();\n\t\t\t}\n\t\t\tif (this.period === 'Today') {\n\t\t\t\treturn frappe.datetime.get_today();\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tfiltered_users() {\n\t\t\tlet filtered = this.users.slice();\n\t\t\tif (this.filter_users_by) {\n\t\t\t\tfiltered = filtered.filter(user =>\n\t\t\t\t\tuser.fullname\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.includes(this.filter_users_by.toLowerCase())\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.sort_users_by) {\n\t\t\t\tfiltered.sort((a, b) => {\n\t\t\t\t\tconst value_a = a[this.sort_users_by];\n\t\t\t\t\tconst value_b = b[this.sort_users_by];\n\n\t\t\t\t\tlet return_value = 0;\n\t\t\t\t\tif (value_a > value_b) {\n\t\t\t\t\t\treturn_value = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value_a < value_b) {\n\t\t\t\t\t\treturn_value = -1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.sort_order === 'desc') {\n\t\t\t\t\t\treturn_value = -return_value;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn return_value;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn filtered;\n\t\t}\n\t},\n\twatch: {\n\t\tperiod() {\n\t\t\tthis.fetch_users_energy_points_and_update_users();\n\t\t}\n\t},\n\tmounted() {\n\t\t$('[data-toggle=\"tooltip\"]').tooltip();\n\t},\n\tcreated() {\n\t\tconst standard_users = ['Administrator', 'Guest', 'guest@example.com'];\n\t\tthis.users = frappe.boot.user_info;\n\t\t// delete standard users from the list\n\t\tstandard_users.forEach(user => delete this.users[user]);\n\t\tthis.users = Object.values(this.users);\n\t\tthis.fetch_users_energy_points_and_update_users();\n\t\tfrappe.realtime.on('update_points', () => {\n\t\t\tthis.fetch_users_energy_points_and_update_users();\n\t\t});\n\t},\n\tmethods: {\n\t\tget_avatar(user) {\n\t\t\treturn frappe.avatar(user, 'avatar-medium');\n\t\t},\n\t\tgo_to_profile_page(user) {\n\t\t\tfrappe.set_route('social', 'profile', user);\n\t\t},\n\t\tfetch_users_energy_points_and_update_users() {\n\t\t\tfrappe\n\t\t\t\t.xcall(\n\t\t\t\t\t'frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points',\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom_date: this.from_date\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.then(data => {\n\t\t\t\t\tlet users = this.users.slice();\n\t\t\t\t\tthis.users = users.map(user => {\n\t\t\t\t\t\tconst points = data[user.name] || {};\n\t\t\t\t\t\tuser.energy_points = points.energy_points || 0;\n\t\t\t\t\t\tuser.review_points = points.review_points || 0;\n\t\t\t\t\t\tuser.given_points = points.given_points || 0;\n\t\t\t\t\t\treturn user;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\ttoggle_log(user) {\n\t\t\tfrappe.set_route('List', 'Energy Point Log', {user:user});\n\t\t}\n\t}\n};\n","<template>\n\t<div class=\"user-list-container\">\n\t\t<ul class=\"list-unstyled user-list\">\n\t\t\t<li class=\"user-card user-list-header text-medium\">\n\t\t\t\t<span class=\"rank-column\"></span>\n\t\t\t\t<span class=\"user-details text-muted\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\tplaceholder=\"Search User\"\n\t\t\t\t\t\tv-model=\"filter_users_by\"\n\t\t\t\t\t>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"flex-40\"></span>\n\t\t\t\t<span class=\"flex-20 text-muted\">\n\t\t\t\t\t<select class=\"form-control\" data-toggle=\"tooltip\" title=\"Period\" v-model=\"period\">\n\t\t\t\t\t\t<option v-for=\"value in period_options\" :key=\"value\" :value=\"value\">{{ value }}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class=\"user-card user-list-header text-medium\">\n\t\t\t\t<span class=\"rank-column\">#</span>\n\t\t\t\t<span class=\"user-details text-muted\">{{ __('User') }}</span>\n\t\t\t\t<span\n\t\t\t\t\tclass=\"flex-20 text-muted\"\n\t\t\t\t\tv-for=\"title in ['Energy Points', 'Review Points', 'Points Given']\"\n\t\t\t\t\t:key=\"title\"\n\t\t\t\t>{{ __(title) }}</span>\n\t\t\t</li>\n\t\t\t<li v-for=\"(user, index) in filtered_users\" :key=\"user.name\">\n\t\t\t\t<div class=\"user-card\">\n\t\t\t\t\t<span class=\"user-details flex\" @click=\"go_to_profile_page(user.name)\">\n\t\t\t\t\t\t<span class=\"rank-column\">{{ index + 1 }}</span>\n\t\t\t\t\t\t<span v-html=\"get_avatar(user.name)\"></span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ user.fullname }}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"text-muted text-medium\"\n\t\t\t\t\t\t\t\t:class=\"{'italic': !user.bio}\"\n\t\t\t\t\t\t\t>{{ frappe.ellipsis(user.bio, 100) || 'No Bio'}}</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"text-muted text-nowrap flex-20\"\n\t\t\t\t\t\tv-for=\"key in ['energy_points', 'review_points', 'given_points']\"\n\t\t\t\t\t\t:key=\"key\"\n\t\t\t\t\t\t@click=\"toggle_log(user.name)\"\n\t\t\t\t\t>{{ user[key] }}</span>\n\t\t\t\t</div>\n\t\t\t\t<energy-point-history\n\t\t\t\t\tv-show=\"show_log_for===user.name\"\n\t\t\t\t\tclass=\"energy-point-history\"\n\t\t\t\t\t:user=\"user.name\"\n\t\t\t\t\t:from_date=\"from_date\"\n\t\t\t\t\t:key=\"user.name + user.energy_points\"\n\t\t\t\t></energy-point-history>\n\t\t\t</li>\n\t\t\t<li class=\"user-card text-muted\" v-if=\"!filtered_users.length\">{{__('No user found')}}</li>\n\t\t</ul>\n\t</div>\n</template>\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tusers: [],\n\t\t\tfilter_users_by: null,\n\t\t\tsort_users_by: 'energy_points',\n\t\t\tsort_order: 'desc',\n\t\t\tshow_log_for: null,\n\t\t\tperiod_options: ['Lifetime', 'This Month', 'This Week', 'Today'],\n\t\t\tperiod: 'This Month'\n\t\t};\n\t},\n\tcomputed: {\n\t\tfrom_date() {\n\t\t\tif (this.period === 'This Month') {\n\t\t\t\treturn frappe.datetime.month_start();\n\t\t\t}\n\t\t\tif (this.period === 'This Week') {\n\t\t\t\treturn frappe.datetime.week_start();\n\t\t\t}\n\t\t\tif (this.period === 'Today') {\n\t\t\t\treturn frappe.datetime.get_today();\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tfiltered_users() {\n\t\t\tlet filtered = this.users.slice();\n\t\t\tif (this.filter_users_by) {\n\t\t\t\tfiltered = filtered.filter(user =>\n\t\t\t\t\tuser.fullname\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.includes(this.filter_users_by.toLowerCase())\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.sort_users_by) {\n\t\t\t\tfiltered.sort((a, b) => {\n\t\t\t\t\tconst value_a = a[this.sort_users_by];\n\t\t\t\t\tconst value_b = b[this.sort_users_by];\n\n\t\t\t\t\tlet return_value = 0;\n\t\t\t\t\tif (value_a > value_b) {\n\t\t\t\t\t\treturn_value = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value_a < value_b) {\n\t\t\t\t\t\treturn_value = -1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.sort_order === 'desc') {\n\t\t\t\t\t\treturn_value = -return_value;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn return_value;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn filtered;\n\t\t}\n\t},\n\twatch: {\n\t\tperiod() {\n\t\t\tthis.fetch_users_energy_points_and_update_users();\n\t\t}\n\t},\n\tmounted() {\n\t\t$('[data-toggle=\"tooltip\"]').tooltip();\n\t},\n\tcreated() {\n\t\tconst standard_users = ['Administrator', 'Guest', 'guest@example.com'];\n\t\tthis.users = frappe.boot.user_info;\n\t\t// delete standard users from the list\n\t\tstandard_users.forEach(user => delete this.users[user]);\n\t\tthis.users = Object.values(this.users);\n\t\tthis.fetch_users_energy_points_and_update_users();\n\t\tfrappe.realtime.on('update_points', () => {\n\t\t\tthis.fetch_users_energy_points_and_update_users();\n\t\t});\n\t},\n\tmethods: {\n\t\tget_avatar(user) {\n\t\t\treturn frappe.avatar(user, 'avatar-medium');\n\t\t},\n\t\tgo_to_profile_page(user) {\n\t\t\tfrappe.set_route('social', 'profile', user);\n\t\t},\n\t\tfetch_users_energy_points_and_update_users() {\n\t\t\tfrappe\n\t\t\t\t.xcall(\n\t\t\t\t\t'frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points',\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom_date: this.from_date\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.then(data => {\n\t\t\t\t\tlet users = this.users.slice();\n\t\t\t\t\tthis.users = users.map(user => {\n\t\t\t\t\t\tconst points = data[user.name] || {};\n\t\t\t\t\t\tuser.energy_points = points.energy_points || 0;\n\t\t\t\t\t\tuser.review_points = points.review_points || 0;\n\t\t\t\t\t\tuser.given_points = points.given_points || 0;\n\t\t\t\t\t\treturn user;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\ttoggle_log(user) {\n\t\t\tfrappe.set_route('List', 'Energy Point Log', {user:user});\n\t\t}\n\t}\n};\n</script>\n<style lang=\"less\" scoped>\n@import 'frappe/public/less/common';\n.user-list {\n\tborder-left: 1px solid @border-color;\n\tborder-right: 1px solid @border-color;\n\t.user-card {\n\t\tdisplay: flex;\n\t\tcursor: pointer;\n\t\tpadding: 12px 15px;\n\t\tborder-bottom: 1px solid @border-color;\n\t\t.user-details {\n\t\t\tflex: 1;\n\t\t\t.italic {\n\t\t\t\tfont-style: italic;\n\t\t\t}\n\t\t}\n\t}\n}\n.rank-column {\n\tflex: 0 0 30px;\n\talign-self: center;\n\t.text-muted\n}\n.flex-20 {\n\tflex: 0 0 20%;\n\ttext-align: right;\n\talign-self: center;\n}\n.flex-40 {\n\tflex: 0 0 40%;\n}\n.user-list-header {\n\tbackground-color: @light-bg;\n}\n.search-bar {\n\tposition: sticky;\n\ttop: 0;\n\tbackground: white;\n\theight: 75px;\n\ttext-align: center;\n\tdiv {\n\t\tmargin: auto;\n\t}\n\twidth: 100%;\n\tleft: 0;\n}\n.energy-point-history {\n\tborder-bottom: 1px solid @border-color;\n\tbackground-color: @light-bg;\n}\n</style>\n\n\n\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: ['src'],\n\tdata() {\n\t\treturn {\n\t\t\tfull_size: false\n\t\t}\n\t},\n\tcreated() {\n\t\tdocument.addEventListener('keyup', this.close_preview_on_escape);\n\t},\n\tdestroyed() {\n\t\tdocument.removeEventListener('keyup', this.close_preview_on_escape);\n\t},\n\tmethods: {\n\t\tclose_preview_on_escape(e) {\n\t\t\tif (e.keyCode === 27) {\n\t\t\t\tthis.$root.$emit('hide_preview')\n\t\t\t}\n\t\t}\n\t}\n}\n","<template>\n\t<div class=\"backdrop\">\n\t\t<img\n\t\t\t:src=\"src\"\n\t\t\t:class=\"{'psuedo-zoom': full_size}\"\n\t\t\t@dblclick=\"full_size = !full_size\"\n\t\t/>\n\t\t<i class=\"fa fa-close close\" @click=\"$root.$emit('hide_preview')\"></i>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: ['src'],\n\tdata() {\n\t\treturn {\n\t\t\tfull_size: false\n\t\t}\n\t},\n\tcreated() {\n\t\tdocument.addEventListener('keyup', this.close_preview_on_escape);\n\t},\n\tdestroyed() {\n\t\tdocument.removeEventListener('keyup', this.close_preview_on_escape);\n\t},\n\tmethods: {\n\t\tclose_preview_on_escape(e) {\n\t\t\tif (e.keyCode === 27) {\n\t\t\t\tthis.$root.$emit('hide_preview')\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.backdrop {\n\tposition: fixed;\n\theight: 100%;\n\twidth: 100%;\n\tbackground: #0000006e;\n\tz-index: 1030;\n\ttop: 0;\n\tright: 0;\n\timg {\n\t\tmargin: auto;\n\t\tdisplay: block;\n\t\twidth: 80%;\n\t\tmax-width: 700px;\n\t\tpadding-top: 100px;\n\t}\n\t.psuedo-zoom {\n\t\tpadding: 10px 0px;\n\t\twidth: auto;\n\t\theight: 100vh;\n\t\tmax-width: initial;\n\t}\n\t.close {\n\t\tposition: absolute;\n\t\ttop: 15px;\n\t\tright: 35px;\n\t\tcolor: black;\n\t\tfont-size: 30px;\n\t}\n}\n</style>\n\n\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport Wall from './pages/Wall.vue';\nimport Profile from './pages/Profile.vue';\nimport UserList from './pages/UserList.vue';\nimport NotFound from './components/NotFound.vue';\nimport ImageViewer from './components/ImageViewer.vue';\n\nfunction get_route_map() {\n\treturn {\n\t\t'social/home': {\n\t\t\t'component': Wall,\n\t\t\t'props': {}\n\t\t},\n\t\t'social/profile/*': {\n\t\t\t'component': Profile,\n\t\t\t'props': {\n\t\t\t\t'user_id': frappe.get_route()[2],\n\t\t\t\t'key': frappe.get_route()[2]\n\t\t\t}\n\t\t},\n\t\t'social/users': {\n\t\t\t'component': UserList,\n\t\t\t'props': {}\n\t\t},\n\t\t'not_found': {\n\t\t\t'component': NotFound,\n\t\t}\n\t}\n}\n\nexport default {\n\tcomponents: {\n\t\tImageViewer\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrent_page: this.get_current_page(),\n\t\t\tshow_preview: false,\n\t\t\tpreview_image_src: ''\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$root.$on('show_preview', (src) => {\n\t\t\tthis.preview_image_src = src;\n\t\t\tthis.show_preview = true;\n\t\t})\n\n\t\tthis.$root.$on('hide_preview', () => {\n\t\t\tthis.preview_image_src = '';\n\t\t\tthis.show_preview = false;\n\t\t})\n\n\t\tthis.update_primary_action(frappe.get_route()[1])\n\t},\n\tmounted() {\n\t\tfrappe.route.on('change', () => {\n\t\t\tif (frappe.get_route()[0] === 'social') {\n\t\t\t\tthis.set_current_page();\n\t\t\t\tthis.update_primary_action(frappe.get_route()[1])\n\t\t\t\tfrappe.utils.scroll_to(0);\n\t\t\t\t$(\"body\").attr(\"data-route\", frappe.get_route_str());\n\t\t\t}\n\t\t});\n\t\tfrappe.ui.setup_like_popover($(this.$refs.social), '.likes', false);\n\t},\n\tmethods: {\n\t\tset_current_page() {\n\t\t\tthis.current_page = this.get_current_page();\n\t\t},\n\t\tupdate_primary_action(current_route) {\n\t\t\tif (current_route === 'home') {\n\t\t\t\tthis.$root.page.set_title(__('Social'));\n\t\t\t\tfrappe.breadcrumbs.update();\n\t\t\t\tthis.$root.page.set_primary_action(__('Post'), () => {\n\t\t\t\t\tfrappe.social.post_dialog.show();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfrappe.breadcrumbs.add({\n\t\t\t\t\ttype: 'Custom',\n\t\t\t\t\tlabel: __('Social Home'),\n\t\t\t\t\troute: '#social/home'\n\t\t\t\t});\n\t\t\t\tthis.$root.page.clear_primary_action();\n\t\t\t}\n\n\t\t\tif (current_route === 'users') {\n\t\t\t\tthis.$root.page.set_title(__('Leaderboard'));\n\t\t\t}\n\t\t},\n\t\tget_current_page() {\n\t\t\tconst route_map = get_route_map();\n\t\t\tconst route = frappe.get_route_str();\n\t\t\tif (route_map[route]) {\n\t\t\t\treturn route_map[route];\n\t\t\t} else {\n\t\t\t\treturn route_map[route.substring(0, route.lastIndexOf('/')) + '/*'] || route_map['not_found']\n\t\t\t}\n\t\t},\n\t}\n}\n","<template>\n\t<div ref=\"social\" class=\"social\">\n\t\t<keep-alive>\n\t\t\t<component :is=\"current_page.component\" v-bind=\"current_page.props\"></component>\n\t\t</keep-alive>\n\t\t<image-viewer :src=\"preview_image_src\" v-if=\"show_preview\"></image-viewer>\n\t</div>\n</template>\n\n<script>\n\nimport Wall from './pages/Wall.vue';\nimport Profile from './pages/Profile.vue';\nimport UserList from './pages/UserList.vue';\nimport NotFound from './components/NotFound.vue';\nimport ImageViewer from './components/ImageViewer.vue';\n\nfunction get_route_map() {\n\treturn {\n\t\t'social/home': {\n\t\t\t'component': Wall,\n\t\t\t'props': {}\n\t\t},\n\t\t'social/profile/*': {\n\t\t\t'component': Profile,\n\t\t\t'props': {\n\t\t\t\t'user_id': frappe.get_route()[2],\n\t\t\t\t'key': frappe.get_route()[2]\n\t\t\t}\n\t\t},\n\t\t'social/users': {\n\t\t\t'component': UserList,\n\t\t\t'props': {}\n\t\t},\n\t\t'not_found': {\n\t\t\t'component': NotFound,\n\t\t}\n\t}\n}\n\nexport default {\n\tcomponents: {\n\t\tImageViewer\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrent_page: this.get_current_page(),\n\t\t\tshow_preview: false,\n\t\t\tpreview_image_src: ''\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$root.$on('show_preview', (src) => {\n\t\t\tthis.preview_image_src = src;\n\t\t\tthis.show_preview = true;\n\t\t})\n\n\t\tthis.$root.$on('hide_preview', () => {\n\t\t\tthis.preview_image_src = '';\n\t\t\tthis.show_preview = false;\n\t\t})\n\n\t\tthis.update_primary_action(frappe.get_route()[1])\n\t},\n\tmounted() {\n\t\tfrappe.route.on('change', () => {\n\t\t\tif (frappe.get_route()[0] === 'social') {\n\t\t\t\tthis.set_current_page();\n\t\t\t\tthis.update_primary_action(frappe.get_route()[1])\n\t\t\t\tfrappe.utils.scroll_to(0);\n\t\t\t\t$(\"body\").attr(\"data-route\", frappe.get_route_str());\n\t\t\t}\n\t\t});\n\t\tfrappe.ui.setup_like_popover($(this.$refs.social), '.likes', false);\n\t},\n\tmethods: {\n\t\tset_current_page() {\n\t\t\tthis.current_page = this.get_current_page();\n\t\t},\n\t\tupdate_primary_action(current_route) {\n\t\t\tif (current_route === 'home') {\n\t\t\t\tthis.$root.page.set_title(__('Social'));\n\t\t\t\tfrappe.breadcrumbs.update();\n\t\t\t\tthis.$root.page.set_primary_action(__('Post'), () => {\n\t\t\t\t\tfrappe.social.post_dialog.show();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfrappe.breadcrumbs.add({\n\t\t\t\t\ttype: 'Custom',\n\t\t\t\t\tlabel: __('Social Home'),\n\t\t\t\t\troute: '#social/home'\n\t\t\t\t});\n\t\t\t\tthis.$root.page.clear_primary_action();\n\t\t\t}\n\n\t\t\tif (current_route === 'users') {\n\t\t\t\tthis.$root.page.set_title(__('Leaderboard'));\n\t\t\t}\n\t\t},\n\t\tget_current_page() {\n\t\t\tconst route_map = get_route_map();\n\t\t\tconst route = frappe.get_route_str();\n\t\t\tif (route_map[route]) {\n\t\t\t\treturn route_map[route];\n\t\t\t} else {\n\t\t\t\treturn route_map[route.substring(0, route.lastIndexOf('/')) + '/*'] || route_map['not_found']\n\t\t\t}\n\t\t},\n\t}\n}\n</script>\n","import Home from './Home.vue';\n\nfrappe.provide('frappe.social');\n\nfrappe.social.Home = class SocialHome {\n\tconstructor({ parent }) {\n\t\tthis.$parent = $(parent);\n\t\tthis.page = parent.page;\n\t\tthis.setup_header();\n\t\tthis.make_body();\n\t}\n\tmake_body() {\n\t\tthis.$social_container = this.$parent.find('.layout-main');\n\t\tnew Vue({\n\t\t\tel: this.$social_container[0],\n\t\t\trender: h => h(Home),\n\t\t\tdata: {\n\t\t\t\t'page': this.page\n\t\t\t}\n\t\t});\n\t}\n\tsetup_header() {\n\t\tthis.page.set_title(__('Social'));\n\t}\n};\n\nfrappe.social.post_dialog = new frappe.ui.Dialog({\n\ttitle: __('Create Post'),\n\tfields: [\n\t\t{\n\t\t\tfieldtype: \"Text Editor\",\n\t\t\tfieldname: \"content\",\n\t\t\tlabel: __(\"Content\"),\n\t\t\treqd: 1\n\t\t}\n\t],\n\tprimary_action_label: __('Post'),\n\tprimary_action: (values) => {\n\t\tfrappe.social.post_dialog.disable_primary_action();\n\t\tconst post = frappe.model.get_new_doc('Post');\n\t\tpost.content = values.content;\n\t\tfrappe.db.insert(post).then(() => {\n\t\t\tfrappe.social.post_dialog.clear();\n\t\t\tfrappe.social.post_dialog.hide();\n\t\t}).finally(() => {\n\t\t\tfrappe.social.post_dialog.enable_primary_action();\n\t\t});\n\t}\n});\n\nfrappe.social.is_home_page = () => {\n\treturn frappe.get_route()[0] === 'social' && frappe.get_route()[1] === 'home';\n};\n\nfrappe.social.is_profile_page = (user) => {\n\treturn frappe.get_route()[0] === 'social'\n\t\t&& frappe.get_route()[1] === 'profile'\n\t\t&& (user ? frappe.get_route()[2] === user : true);\n};\n\nfrappe.social.is_session_user_page = () => {\n\treturn frappe.social.is_profile_page() && frappe.get_route()[2] === frappe.session.user;\n};\n\nfrappe.provide('frappe.app_updates');\n\nfrappe.utils.make_event_emitter(frappe.app_updates);\n"],"names":["const","this","let"],"mappings":"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"}